using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Timers;
using System.Threading.Tasks;

namespace hiányzások
{
    class Program
    {

        struct tanulok
        {
            public string nev;
            public string osztály;
            public int nap1;
            public int napU;
            public int Lóg;

        }

        static void Main(string[] args)
        {
            List<tanulok> LISTAtan = new List<tanulok>();

            string[] txt = File.ReadAllLines(@"szeptember.csv", Encoding.UTF8);   //ansi =UTF7

            for (int s = 1; s < txt.Count(); s++)
            {
                if (txt[s].Length > 0)

                {


                    char[] separator = new char[] { ';'};
                    string[] so = txt[s].Split(separator);

                    tanulok adat = new tanulok();

                    adat.nev = so[0];

                    adat.osztály = so[1];
                    adat.nap1 = Convert.ToInt32(so[2]);
                    adat.napU = Convert.ToInt32(so[3]);
                    adat.Lóg = Convert.ToInt32(so[4]);

                    LISTAtan.Add(adat);
                }
            }
            int t;
            string nevek;
            int cÖsszz = 0;
            string[] nevsor = new string[LISTAtan.Count];
            Console.WriteLine("\nAZ OSZTÁLY NÉVSOR : \t");
            for (t = 1; t < LISTAtan.Count; t++)
            {

                cÖsszz += LISTAtan[t].Lóg;

                if (t == 20) { Console.WriteLine("\t"); }

                Console.Write(LISTAtan[t].nev + ("\t"));

            }
            Console.ForegroundColor = ConsoleColor.White;
            Console.WriteLine();
            Console.WriteLine("\nA Lógások száma  szeptemberben: " + cÖsszz);
            Console.ForegroundColor = ConsoleColor.Green;
            Console.Write("Kerestett nap 1 és 30 között ?:");

            int nap = Convert.ToInt32(Console.ReadLine());
            Console.Write("Tanulo Neve ?:");

            string TANNEVE = Console.ReadLine();
            Console.Clear();
            int elsoT = 0;
            int[] találat = new int[LISTAtan.Count];
            for (int x = 0; x < LISTAtan.Count; x++)
                if (LISTAtan[x].nap1 == nap) Console.WriteLine((LISTAtan[x].nev) + " a    " + LISTAtan[x].osztály + ".osztályból"); Console.Write("\n Látja a tanulo nevét? (i / n): ");
            string L = Console.ReadLine();
            if (L == "i") { Console.WriteLine("A " + nap + ". napon " + TANNEVE + " Hiányzott!"); }
            else if (L != "i") { Console.WriteLine("A  " + nap + ". napon " + TANNEVE + " Nem hiányzott! -A Fentiek Igen"); }
            Console.ForegroundColor = ConsoleColor.Gray;
            Console.WriteLine("\nAz osztályonkénti hiányzások összesítve :");


            List<string> osztalyokSzam = new List<string>();
            int c = 0;
            for (int sz = 1; sz < 17; sz++)
            {
                if (sz < 9)
                { osztalyokSzam.Add(sz + "a"); }
                else
                { c++; osztalyokSzam.Add(c + "b"); }

            }
            
            int o;
            int g = 0;
            int[] db = new int[LISTAtan.Count];
            for (o=0; o < LISTAtan.Count; o++)
            {
                for (g = 0; g < 16; g++)
                    if ((LISTAtan[o].osztály == osztalyokSzam[g]) && (LISTAtan[o].Lóg >0))

                    {
                        db[o] += LISTAtan[o].Lóg;
                        Console.WriteLine(osztalyokSzam[g] + " osztályból " + db[o] + " ember lógott");
                    }

                    
                 //   { Console.WriteLine(osztalyokSzam[g] + " osztályból " + db[o] + " ember lógott"); }
                
                    
                
                
                
                 // for (int r = 0; r < osztalyokSzam.Count; r++) { Console.WriteLine((osztalyokSzam[r]) + "" + db[r]);  }
              


            }

            Console.ReadKey();

        }
    
    }
}
